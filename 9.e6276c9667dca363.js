(()=>{"use strict";var f,b={9009:(f,x,_)=>{function k(n,e,i,s,r,o,h){try{var p=n[o](h),c=p.value}catch(u){return void i(u)}p.done?e(c):Promise.resolve(c).then(s,r)}function O(n,e,i,s){return Object.keys(n[e].connections).filter(r=>n[r].flowRate>0&&!i.includes(r)).map(r=>{var o=s-n[e].connections[r].distance-1;return{destination:r,releasedPressure:o*n[r].flowRate,timeLeft:o,positions:n[e].connections[r].path}}).filter(r=>r.timeLeft>=0).sort((r,o)=>o.releasedPressure-r.releasedPressure)}function P(n,e,i,s=[],r,o={value:0,higherValue:0}){if(o.value+=1,null==r&&(r=e.map(u=>[])),0==i)return r;o.value%1e6==0&&console.log((new Date).toISOString(),o.higherValue,o.value);for(let u=0;u<e.length;u++){const t=e[u];if("idle"==t.currentState||"opening"==t.currentState){var h=O(n,t.currentPosition,s,i);for(const l of h){var p=e.map(a=>Object.assign({},a));p[u].nextPositions=l.positions,p[u].currentState="moving",0==s.length&&(o.higherValue+=1);var c=P(n,p,i,s.concat(l.destination),void 0,o);c[u]=[l].concat(...c[u]),c.flatMap(a=>a).map(a=>a.releasedPressure).sum()>r.flatMap(a=>a).map(a=>a.releasedPressure).sum()&&(r=c)}return r}}for(let u=0;u<e.length;u++){const t=e[u];"moving"==t.currentState&&(t.nextPositions.length>0?(t.currentPosition=t.nextPositions[0],t.nextPositions=t.nextPositions.slice(1)):t.currentState="opening")}return P(n,e,i-1,s,r,o)}Array.prototype.sum=function(){return function W(n){return 0==n.length?0:n.reduce((e,i)=>e+i)}(this)},Array.prototype.product=function(){return function G(n){return n.reduce((e,i)=>e*i)}(this)},Array.prototype.chunk=function(n){return function A(n,e){return Array.from(Array(Math.ceil(n.length/e)),(i,s)=>n.slice(s*e,s*e+e))}(this,n)},Array.range=(n,e)=>Array.from({length:e-n},(i,s)=>s+n),addEventListener("message",function(){var n=function R(n){return function(){var e=this,i=arguments;return new Promise(function(s,r){var o=n.apply(e,i);function h(c){k(o,s,r,h,p,"next",c)}function p(c){k(o,s,r,h,p,"throw",c)}h(void 0)})}}(function*({data:e}){var i=e[0],s=e[1];console.log("Worker start",i);var r=P(e[2],e[3],e[4],e[5],void 0,{value:-1,higherValue:i});postMessage({move:s,bestPotentialMoves:r})});return function(e){return n.apply(this,arguments)}}())}},d={};d.m=b,d.u=f=>f+".e6276c9667dca363.js",d.o=(f,x)=>Object.prototype.hasOwnProperty.call(f,x),d.tt=()=>(void 0===f&&(f={createScriptURL:x=>x},typeof trustedTypes<"u"&&trustedTypes.createPolicy&&(f=trustedTypes.createPolicy("angular#bundler",f))),f),d.tu=f=>d.tt().createScriptURL(f),d.p="",d.b=self.location+"",b[9009](0,{},d)})();